<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Print</title>
    <style>
        #preview {
            display: block;
            margin-top: 10px;
            max-width: 300px;
            max-height: 300px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <ul id="flashMessages">
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <li style="color: {% if category == 'error' %}red{% else %}green{% endif %};">
                    {{ message }}
                </li>
            {% endfor %}
        {% endif %}
    {% endwith %}
</ul>

    <h1>Print Tools</h1>

    <form action="{{ url_for('print.run_test_print') }}" method="POST">
        <button type="submit">Test Print</button>
    </form>

    <h1>Print an Image</h1>

    <!-- Notice: NOT submitting a form the usual way -->
    <!-- The JS will send the edited version via fetch() -->
    
    <input type="file" id="imageInput" accept="image/*">

    <canvas id="previewCanvas"
            style="display:block; max-width:300px; max-height:300px; border:1px solid #ccc;">
    </canvas>

    <label>Brightness:
        <input type="range" id="brightness" min="-100" max="100" value="0">
    </label>
    <br>

    <label>Contrast:
        <input type="range" id="contrast" min="-100" max="100" value="0">
    </label>

    <button id="rotateButton">Rotate 90Â°</button>
    <button id="restoreButton">Restore</button>
    <!-- This button is outside form so JS fully controls upload/print -->
    <button id="printButton">Print</button>
    <script>
        const UPLOAD_URL = "{{ url_for('print.upload_and_print') }}";
    </script>
    <script src="{{ url_for('static', filename='js/image_tool.js') }}"></script>

</body>
</html>
